(function(){"use strict";function v(t,s,a=100,n=1e3){if(typeof t!="function"||typeof s!="function"){console.log("错误");return}let i=0,c=null;function l(){if(c&&clearTimeout(c),i++,i>a)return s(!1);if(t())return s(!0);c=setTimeout(()=>{l()},n)}l()}async function x(t){let s;const a=t.headers.get("Content-Type")||"";try{if(a.includes("application/json"))s=await t.json();else if(a.includes("text/")){let n=await t.text();n=n.replace(/^for\s*\(\s*;;\s*\);/,"").trim();try{s=JSON.parse(n)}catch{s=n}}else if(a.includes("application/octet-stream")||a.includes("blob"))s=await t.blob();else if(a.includes("form-data"))s=await t.formData();else{let n=await t.text();try{s=JSON.parse(n)}catch{s=n}}}catch{}return s}const S="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let _=(t=21)=>{let s="",a=crypto.getRandomValues(new Uint8Array(t|=0));for(;t--;)s+=S[a[t]&63];return s};window.currentProcess={row:null,prompt:"",folder:""},window.videoStorage=[],window.authorization="";function L(){const t=window.fetch;window.fetch=async(s,a)=>{const i=E(s).includes("://aisandbox-pa.googleapis.com/v1/whisk:generateImage"),c={...window.currentProcess},l=_();i&&c.row!=null&&(console.log("返回的id是：",l),window.emitter.emit("onSubmitSuccess",{...c,id:l}));const u=await t(s,a);if(i&&c.row!=null)try{const e=u.clone(),o=await x(e);if(o){const r=o?.imagePanels?.[0]?.generatedImages?.[0]?.encodedImage;if(r){const f={[l]:[{url:r,thumbnail:r}]};window.emitter.emit("onReceiveData",f)}}}catch(e){console.error(e)}return u}}function E(t){return typeof t=="string"?t:t instanceof URL?t.href:t instanceof Request?t.url:String(t??"")}function M(t,s){if(window.modulefactory)return;const a=Object.keys(t)[0],n=t[a];console.log("找到------------------module"),t[a]=function(){window.modulefactory=arguments[2],n.apply(this,arguments)}}function R(){v(()=>window.require("jsx").jsx,t=>{if(!t)return;console.log("找到------------------jsx");const s=window.require("jsx").jsx;window.require("jsx").jsx=function(a,n){return typeof n.onPromptValueChange=="function"&&(window.setPrompt=n.onPromptValueChange),typeof n.onSubmit=="function"&&(window.generate=n.onSubmit),s(...arguments)}})}const d={Modules:[]};function j(){if(!window.modulefactory)return;console.log("刷新数据","modulefactory"),d.Modules=Object.keys(window.modulefactory.m).map(n=>{var i=null;try{i=window.modulefactory(n)}catch{}return i});const t=function(i){return window.modulefactory(i)},s=function(i){var c=[];return d.Modules.forEach(function(l){if(typeof l<"u")if(typeof i=="string"){if(typeof l.default=="object")for(const u in l.default)u==i&&c.push(l);for(const u in l)u==i&&c.push(l)}else if(typeof i=="function")i(l)&&c.push(l);else throw"沒有模塊"}),c},a=function(n){if(d.Modules==0)throw Error("沒有模塊");var i=[];if(typeof n=="string")d.Modules.forEach(function(c){c.toString().includes(n)&&i.push(c)});else if(typeof n=="function")d.Modules.forEach(function(c){n(c)&&i.push(c)});else throw Error("沒有模塊");return i};window.moduleManager={modules:d.Modules,findModule:s,findFunction:a,get:window.modulefactory?t:null}}if(window.webpackChunk_N_E)console.log("已经存在 webpackChunk_N_E");else{let t=function(e){replaceIds.length&&replaceIds.forEach(o=>{i[o]?i[o](e,fbmodules):window.replaceIds=window.replaceIds.filter(r=>r!==o)})},s=function(e){const o=e.id;i[o]=e,replaceIds.push(o)};console.log("不存在 webpackChunk_N_E");const a=Function.prototype.toString;window.originalToString=a,window.webpackChunk_N_E=[];let n=window.webpackChunk_N_E.push;window.eventListeners||(window.eventListeners={box:{},waitMount:{},componentStates:{},add:(e,o)=>{if(eventListeners.box[e]||(eventListeners.box[e]=[]),eventListeners.box[e].push(o),eventListeners.waitMount[e]!==void 0){let r=eventListeners.waitMount[e];delete eventListeners.waitMount[e],setTimeout(()=>{eventListeners.fire(e,r)},0)}return()=>{eventListeners.box[e]=eventListeners.box[e].filter(r=>r!==o)}},fire:(e,o)=>{eventListeners.box[e]?eventListeners.box[e].length>0?eventListeners.box[e].forEach(r=>{r(o)}):eventListeners.componentStates[e]=!!o:eventListeners.waitMount[e]=o}}),window.heroReplace||(window.heroReplace={node_replace:function(e,o,r,f){return f.createElement(function(){const g=!!eventListeners.componentStates[e];var[m,w]=f.useState(heroReplace[e+"_proxy"]?g:!1);return f.useEffect(()=>eventListeners.add(e,p=>{eventListeners.componentStates[e]=!!p,w(!!p)}),[w,e]),m&&heroReplace[e+"_proxy"]?f.createElement(heroReplace[e+"_proxy"],{sourceNode:o,mode:r,moduleId:e}):o},{})},memo_replace:function(e,o){var r=window.require("react");return r?.memo?r.memo(function(f,h,g,m){console.log(2,arguments);let w=Object.assign({},f,h,g,m);const p=!!eventListeners.componentStates[e];var[P,y]=r.useState(heroReplace[e+"_proxy"]?p:!1);return r.useEffect(()=>eventListeners.add(e,b=>{eventListeners.componentStates[e]=!!b,y(!!b)}),[y,e]),P&&heroReplace[e+"_proxy"]?r.createElement(heroReplace[e+"_proxy"],{sourcefunc:o,props:w,moduleId:e}):r.createElement(o,w)}):(console.log("替换失败",e),o)},module_replace:function(e,o){var r=window.require("react");return!r||!r.createElement?(console.log("没有，react"),o):function(h){const g=!!eventListeners.componentStates[e];var[m,w]=r.useState(heroReplace[e+"_proxy"]?g:!1);return r.useEffect(()=>eventListeners.add(e,p=>{eventListeners.componentStates[e]=!!p,w(!!p)}),[w,e]),m&&heroReplace[e+"_proxy"]?r.createElement(heroReplace[e+"_proxy"],{props:h,sourcefunc:o,mouldeId:e}):r.createElement(o,h)}}}),window.fbmodules={};let i={};window.replaceIds=[],window.require=function(e){if(!fbmodules[e]){if(!window.moduleManager)return{};let o=window.moduleManager.findModule(C[e]);if(!o?.[0])return{};fbmodules[e]=o?.[0]}return fbmodules[e]};let c=0;const l={0:n};let u;Object.defineProperty(webpackChunk_N_E,"push",{get:()=>{if(c>0){const e=c;return function(){t(arguments[0][1]),clearTimeout(u),u=setTimeout(()=>{j()},1e3),l[e].apply(webpackChunk_N_E,arguments)}}return n},set:e=>{c++,l[c]=e}}),s(M),R()}L();const C={react:t=>t&&t.createElement,"react-dom":t=>t&&t.hydrateRoot&&t.render,jsx:t=>t.jsx}})();
