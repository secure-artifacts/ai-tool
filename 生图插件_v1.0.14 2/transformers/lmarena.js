(function(){"use strict";const h="react";y.id=h;function y(n,u){const s=Object.entries(n).find(o=>o[1]&&originalToString.call(o[1]).includes(".createElement="));if(s){window.replaceIds=window.replaceIds.filter(i=>i!==h);const o=n[s[0]];n[s[0]]=function(){window.modulefactory=arguments[2],o.apply(this,arguments),console.log("找到------------------",h),u[h]=arguments[0].exports}}}function S(n){return typeof n=="string"?n:n instanceof URL?n.href:n instanceof Request?n.url:String(n??"")}function R(n){window.history.pushState({},"",n),window.dispatchEvent(new PopStateEvent("popstate"))}const v="jsx";m.id=v;function m(n,u){const s=Object.entries(n).find(o=>o[1]&&originalToString.call(o[1]).includes(".jsx="));if(s){window.replaceIds=window.replaceIds.filter(i=>i!==v);const o=n[s[0]];n[s[0]]=function(){window.modulefactory=arguments[2],o.apply(this,arguments),console.log("找到------------------",v),u[v]=arguments[0].exports;const i=arguments[0].exports.jsx;arguments[0].exports.jsx=function(c,l){if(l?.sendMessage&&l.fileUploaderProps){window.setPrompt=l.sendMessage;const e=l.fileUploaderProps.getInputProps().onChange;window.generate=()=>{},window.uploadImage=async t=>(e({preventDefault:()=>{},persist:()=>{},target:{files:t}}),"")}return i.apply(this,arguments)}}}}window.startNewChat=async()=>{R("/zh/c/new?mode=direct&chat-modality=image")},window.currentProcess={row:null,prompt:"",folder:"",filename:[]},window.videoStorage=[],window.authorization="";function L(){const n=window.fetch;window.fetch=async(s,o)=>{const i=S(s),c={...window.currentProcess},l=(i.includes("create-evaluation")||i.includes("post-to-evaluation"))&&c.row!=null,e=await n(s,o);if(l&&e.body?.getReader&&typeof o.body=="string")try{const r=JSON.parse(o.body).id;if(r){window.emitter.emit("onSubmitSuccess",{id:r,...c});const a=e.body.getReader;e.body.getReader=function(){const f=a.apply(this,arguments);return f.id=r,f}}}catch{}return e};const u=ReadableStreamDefaultReader.prototype.read;ReadableStreamDefaultReader.prototype.read=async function(){const s=await u.call(this);if(s?.value instanceof Uint8Array&&this.id)try{const i=new TextDecoder("utf-8").decode(s.value,{stream:!0});if(i.includes("finishReason")){const c=[];for(const l of i.split(`
`).filter(e=>e.includes('"type":"image"'))){const e=l.indexOf(":");if(e!=-1){const t=JSON.parse(l.slice(e+1));if(Array.isArray(t)){const r=t.map(a=>a.image).filter(Boolean);c.push(...r.map(a=>({url:a,thumbnail:a})))}}}c.length&&window.emitter.emit("onReceiveData",{[this.id]:c})}}catch{}return s}}if(window.webpackChunk_N_E)console.log("已经存在 webpackChunk_N_E");else{let n=function(e){replaceIds.length&&replaceIds.forEach(t=>{i[t]?i[t](e,fbmodules):window.replaceIds=window.replaceIds.filter(r=>r!==t)})},u=function(e){const t=e.id;i[t]=e,replaceIds.push(t)};console.log("不存在 webpackChunk_N_E");const s=Function.prototype.toString;window.originalToString=s,window.webpackChunk_N_E=[];let o=window.webpackChunk_N_E.push;window.eventListeners||(window.eventListeners={box:{},waitMount:{},componentStates:{},add:(e,t)=>{if(eventListeners.box[e]||(eventListeners.box[e]=[]),eventListeners.box[e].push(t),eventListeners.waitMount[e]!==void 0){let r=eventListeners.waitMount[e];delete eventListeners.waitMount[e],setTimeout(()=>{eventListeners.fire(e,r)},0)}return()=>{eventListeners.box[e]=eventListeners.box[e].filter(r=>r!==t)}},fire:(e,t)=>{eventListeners.box[e]?eventListeners.box[e].length>0?eventListeners.box[e].forEach(r=>{r(t)}):eventListeners.componentStates[e]=!!t:eventListeners.waitMount[e]=t}}),window.heroReplace||(window.heroReplace={node_replace:function(e,t,r,a){return a.createElement(function(){const d=!!eventListeners.componentStates[e];var[g,p]=a.useState(heroReplace[e+"_proxy"]?d:!1);return a.useEffect(()=>eventListeners.add(e,w=>{eventListeners.componentStates[e]=!!w,p(!!w)}),[p,e]),g&&heroReplace[e+"_proxy"]?a.createElement(heroReplace[e+"_proxy"],{sourceNode:t,mode:r,moduleId:e}):t},{})},memo_replace:function(e,t){var r=window.require("react");return r?.memo?r.memo(function(a,f,d,g){console.log(2,arguments);let p=Object.assign({},a,f,d,g);const w=!!eventListeners.componentStates[e];var[E,b]=r.useState(heroReplace[e+"_proxy"]?w:!1);return r.useEffect(()=>eventListeners.add(e,x=>{eventListeners.componentStates[e]=!!x,b(!!x)}),[b,e]),E&&heroReplace[e+"_proxy"]?r.createElement(heroReplace[e+"_proxy"],{sourcefunc:t,props:p,moduleId:e}):r.createElement(t,p)}):(console.log("替换失败",e),t)},module_replace:function(e,t){var r=window.require("react");return!r||!r.createElement?(console.log("没有，react"),t):function(f){const d=!!eventListeners.componentStates[e];var[g,p]=r.useState(heroReplace[e+"_proxy"]?d:!1);return r.useEffect(()=>eventListeners.add(e,w=>{eventListeners.componentStates[e]=!!w,p(!!w)}),[p,e]),g&&heroReplace[e+"_proxy"]?r.createElement(heroReplace[e+"_proxy"],{props:f,sourcefunc:t,mouldeId:e}):r.createElement(t,f)}}}),window.fbmodules={};let i={};window.replaceIds=[],window.require=function(e){if(!fbmodules[e]){if(!window.moduleManager)return{};let t=window.moduleManager.findModule(_[e]);if(!t?.[0])return{};fbmodules[e]=t?.[0]}return fbmodules[e]};let c=0;const l={0:o};Object.defineProperty(webpackChunk_N_E,"push",{get:()=>{if(c>0){const e=c;return function(){n(arguments[0][1]),l[e].apply(webpackChunk_N_E,arguments)}}return o},set:e=>{c++,l[c]=e}}),u(y),u(m)}L();const _={react:n=>n&&n.createElement,"react-dom":n=>n&&n.hydrateRoot&&n.render,jsx:n=>n.jsx}})();
